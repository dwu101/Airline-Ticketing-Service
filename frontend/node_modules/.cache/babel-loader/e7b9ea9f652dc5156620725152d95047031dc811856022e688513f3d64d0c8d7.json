{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\danqw\\\\OneDrive\\\\Desktop\\\\school\\\\DB\\\\Airline-Ticketing-Service\\\\frontend\\\\src\\\\Components\\\\FlightSearch.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport TextInputBox from './TextInputBox';\nimport DateInputBox from './DateInputBox';\nimport DateConverter from './DateConverter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FlightSearch = ({\n  isloggedin\n}) => {\n  _s();\n  console.log('isLogged', isloggedin);\n\n  // State to manage user input\n  const [departAirport, setDepartAirport] = useState('');\n  const [arriveAirport, setArriveAirport] = useState('');\n  const [departDate, setDepartDate] = useState('0000-00-00');\n  const [returnDate, setReturnDate] = useState('0000-00-00');\n  const [tripType, setTripType] = useState('');\n  const [way1Flights, setWay1Flights] = useState(null);\n  const [way2Flights, setWay2Flights] = useState(null);\n  const [allAirports, setAllAirports] = useState([]);\n  const [result, setResult] = useState(\"\");\n  const [showResult, setShowResult] = useState(false);\n  const [purchase, setPurchase] = useState(false);\n  const [cardType, setCardType] = useState('');\n  const [cardNumber, setCardNumber] = useState('');\n  const [cardName, setCardName] = useState('');\n  const [cardExp, setCardExp] = useState('');\n  const [purchaseResult, setPurchaseResult] = useState('');\n  const [way1Clicked, setWay1Clicked] = useState('');\n  const [way2Clicked, setWay2Clicked] = useState('');\n  const handleWay1Click = clickedItem => {\n    console.log(clickedItem);\n    setWay1Clicked(clickedItem);\n  };\n  const handleWay2Click = clickedItem2 => {\n    setWay2Clicked(clickedItem2);\n  };\n  const handleTransaction = async e => {\n    e.preventDefault();\n    if (way1Clicked == '') {\n      setPurchaseResult(\"Please Enter all Flight Information\");\n      return;\n    }\n    if (tripType == \"Round-Trip\" && way2Clicked == '') {\n      setPurchaseResult(\"Please Enter all Flight Information\");\n      return;\n    }\n\n    // flightNum = data['flightNum']\n    // airline = data['airline']\n    // departure = data['departure']\n\n    const result = await fetch('/increaseTicketPrice', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'flightNum': way1Clicked['Flight_Number'],\n        'airline': way1Clicked['Airline_Name'],\n        'departure': DateConverter(way1Clicked['Departure_Date_Time'])\n      })\n    });\n    if (result.status === 400) {\n      setPurchaseResult(\"ERROR IN TRANSACTION\");\n    } else {\n      const priceIncrease = await result.json();\n      console.log(priceIncrease);\n      if (priceIncrease['Increase']) {\n        const newFlight = new Map(way1Clicked);\n        newFlight.set('Base_Price', way1Clicked['Base_Price'] * 1.25);\n        setWay1Clicked(newFlight);\n      }\n      if (tripType === \"Round-Trip\") {\n        const Way2Result = await fetch('/increaseTicketPrice', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            'flightNum': way2Clicked['Flight_Number'],\n            'airline': way2Clicked['Airline_Name'],\n            'departure': DateConverter(way2Clicked['Departure_Date_Time'])\n          })\n        });\n        if (Way2Result.status === 400) {\n          setPurchaseResult(\"ERROR IN TRANSACTION\");\n        } else {\n          const priceIncrease = await Way2Result.json();\n          if (priceIncrease['Increase']) {\n            const newFlight = new Map(way2Clicked);\n            newFlight.set('Base_Price', way2Clicked['Base_Price'] * 1.25);\n            setWay2Clicked(newFlight);\n          }\n        }\n      }\n    }\n    // email = session[0]\n    // flightNum = data['flightNum']\n    // departure = data['departure']\n    // price = data['price']\n    // cardType = data['cardType']\n    // cardNumber = data['cardNumber']\n    // cardName = data['cardName']\n    // cardExp = data['cardExp']\n    try {\n      console.log(\"CARDEXP\", cardExp);\n      const response = await fetch('/buyTicket', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          //TICKET ID WILL BE RNG (CHECK), EMAIL ADDRESS FROM SESSION\n          'cardType': cardType,\n          'cardNumber': cardNumber,\n          'cardName': cardName,\n          'cardExp': cardExp,\n          'flightNum': way1Clicked['Flight_Number'],\n          'departure': DateConverter(way1Clicked[\"Departure_Date_Time\"]),\n          'price': way1Clicked[\"Base_Price\"] //ADJUST PRICE\n        })\n      });\n\n      if (response.status === 200) {\n        setPurchaseResult(\"Ticket Bought Successfully\");\n        const response = await fetch('/updateCookies', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({//TICKET ID WILL BE RNG (CHECK), EMAIL ADDRESS FROM SESSION\n          })\n        });\n      } else {\n        // (response.status === 400)\n        setPurchaseResult(\"Error in Transaction\");\n      }\n      if (way2Clicked) {\n        try {\n          const response = await fetch('/buyTicket', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              //TICKET ID WILL BE RNG (CHECK), EMAIL ADDRESS FROM SESSION\n              'cardType': cardType,\n              'cardNumber': cardNumber,\n              'cardName': cardName,\n              'cardExp': cardExp,\n              'flightNum': way2Clicked['Flight_Number'],\n              'departure': DateConverter(way2Clicked[\"Departure_Date_Time\"]),\n              'price': way2Clicked[\"Base_Price\"] //ADJUST PRICE\n            })\n          });\n\n          if (response.status === 200) {\n            setPurchaseResult(\"Ticket Bought Successfully\");\n          } else {\n            // (response.status === 400)\n            setPurchaseResult(\"Error in Transaction\");\n          }\n        } catch (error) {\n          console.log(\"ERROR\", error);\n        }\n      }\n    } catch (error) {\n      console.log(\"ERROR\", error);\n    }\n  };\n  const allowPurchase = () => {\n    setPurchase(true);\n  };\n  const handleSubmit = async e => {\n    console.log(\"POOOOOP: \");\n    console.log(isloggedin);\n    e.preventDefault();\n    try {\n      const response = await fetch('/FlightSearch', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          'DepartAirport': departAirport,\n          'ArriveAirport': arriveAirport,\n          'DepartDate': departDate,\n          'ReturnDate': returnDate,\n          'TripType': tripType\n        })\n      });\n      const responseData = await response.json();\n      console.log(responseData);\n      console.log(responseData['Flights']);\n      if (response.status === 200) {\n        setResult(\"\");\n        setWay1Flights(responseData[\"Way1\"]);\n        setWay2Flights(responseData[\"Way2\"]);\n        setShowResult(true);\n      } else {\n        // (response.status === 400)\n        setResult(\"No Flights Found\");\n        setWay1Flights(null);\n        setWay2Flights(null);\n      }\n    } catch (error) {\n      console.log(\"ERROR\", error);\n    }\n  };\n  const fetchData = async () => {\n    try {\n      const response = await fetch('/getAirports');\n      const data = await response.json();\n      setAllAirports(data['Airports']);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n    const intervalId = setInterval(() => {\n      fetchData();\n    }, 99000);\n    return () => clearInterval(intervalId);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"SearchBox\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputBox\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Select a Departure Airport or Departure City\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: departAirport,\n          onChange: e => setDepartAirport(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \" Select an option\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 9\n          }, this), allAirports.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: item.Airport_Name || item.City,\n            children: item.Airport_Name || item.City\n          }, item.Airport_Name || item.City, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 9\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputBox\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Select an Arrival Depature Airport or Arrival City\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: arriveAirport,\n          onChange: e => setArriveAirport(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select an option\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 11\n          }, this), allAirports.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: item.Airport_Name || item.City,\n            children: item.Airport_Name || item.City\n          }, item.Airport_Name || item.City, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 11\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputBox\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"One-Way or Round Trip?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => setTripType(e.target.value),\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"One-Way\",\n            children: \"One-Way\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Round-Trip\",\n            children: \"Round-Trip\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"dateInput\",\n          children: \"Departure Date :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"inputBox\",\n          type: \"date\",\n          id: \"departDate\",\n          value: departDate,\n          onChange: e => setDepartDate(e.target.value),\n          pattern: \"\\\\d{4}-\\\\d{2}-\\\\d{2}\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 7\n      }, this), tripType === \"Round-Trip\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"dateInput\",\n          children: \"Return Date :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"inputBox\",\n          type: \"date\",\n          id: \"returnDate\",\n          value: returnDate,\n          onChange: e => setReturnDate(e.target.value),\n          pattern: \"\\\\d{4}-\\\\d{2}-\\\\d{2}\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Search Flight\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: result\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 5\n    }, this), showResult && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: result\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Departure\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 7\n      }, this), way1Flights && /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: way1Flights.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: () => handleWay1Click(item),\n          style: {\n            cursor: 'pointer',\n            color: way1Clicked === item ? 'red' : 'black'\n          },\n          children: Object.entries(item).map(([key, value]) => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [key, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 21\n            }, this), \" \", value, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 52\n            }, this)]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 19\n          }, this))\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Return\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 7\n        }, this), way2Flights && /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: way2Flights.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => handleWay2Click(item),\n            style: {\n              cursor: 'pointer',\n              color: way2Clicked === item ? 'red' : 'black'\n            },\n            children: Object.entries(item).map(([key, value]) => /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [key, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 21\n              }, this), \" \", value, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 52\n              }, this)]\n            }, key, true, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 19\n            }, this))\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 14\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 5\n      }, this), isloggedin && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: allowPurchase,\n          children: \" Purchase A Flight \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 5\n      }, this), !isloggedin && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/Login\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \" Log in or Register to Purchase a Flight \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 5\n      }, this), purchase && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleTransaction,\n          children: [/*#__PURE__*/_jsxDEV(TextInputBox, {\n            setState: setCardType,\n            label: \"Card Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(TextInputBox, {\n            setState: setCardNumber,\n            label: \"Card Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(TextInputBox, {\n            setState: setCardName,\n            label: \"Card Holder Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(DateInputBox, {\n            setState: setCardExp,\n            label: \"Card Expiration\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Buy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: purchaseResult\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 260,\n    columnNumber: 5\n  }, this);\n};\n_s(FlightSearch, \"eTPOJ3wZiiM3hpR0syaCjyuZUZ8=\");\n_c = FlightSearch;\nFlightSearch.propTypes = {\n  isloggedin: PropTypes.bool.isRequired\n};\nexport default FlightSearch;\nvar _c;\n$RefreshReg$(_c, \"FlightSearch\");","map":{"version":3,"names":["React","useState","useEffect","Link","PropTypes","TextInputBox","DateInputBox","DateConverter","jsxDEV","_jsxDEV","FlightSearch","isloggedin","_s","console","log","departAirport","setDepartAirport","arriveAirport","setArriveAirport","departDate","setDepartDate","returnDate","setReturnDate","tripType","setTripType","way1Flights","setWay1Flights","way2Flights","setWay2Flights","allAirports","setAllAirports","result","setResult","showResult","setShowResult","purchase","setPurchase","cardType","setCardType","cardNumber","setCardNumber","cardName","setCardName","cardExp","setCardExp","purchaseResult","setPurchaseResult","way1Clicked","setWay1Clicked","way2Clicked","setWay2Clicked","handleWay1Click","clickedItem","handleWay2Click","clickedItem2","handleTransaction","e","preventDefault","fetch","method","headers","body","JSON","stringify","status","priceIncrease","json","newFlight","Map","set","Way2Result","response","error","allowPurchase","handleSubmit","responseData","fetchData","data","intervalId","setInterval","clearInterval","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","map","item","Airport_Name","City","required","htmlFor","type","id","pattern","index","onClick","style","cursor","color","Object","entries","key","to","setState","label","_c","propTypes","bool","isRequired","$RefreshReg$"],"sources":["C:/Users/danqw/OneDrive/Desktop/school/DB/Airline-Ticketing-Service/frontend/src/Components/FlightSearch.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport TextInputBox from './TextInputBox';\r\nimport DateInputBox from './DateInputBox';\r\nimport DateConverter from './DateConverter';\r\n\r\n\r\nconst FlightSearch = ({isloggedin}) => {\r\n  console.log('isLogged', isloggedin);\r\n  \r\n  // State to manage user input\r\n  const [departAirport, setDepartAirport] = useState('');\r\n  const [arriveAirport, setArriveAirport] = useState('');\r\n  const [departDate, setDepartDate] = useState('0000-00-00');\r\n  const [returnDate, setReturnDate] = useState('0000-00-00');\r\n  const [tripType, setTripType] = useState('');\r\n  const [way1Flights, setWay1Flights] = useState(null);\r\n  const [way2Flights, setWay2Flights] = useState(null);\r\n  const [allAirports, setAllAirports] = useState([]);\r\n  const [result, setResult] = useState(\"\");\r\n  const [showResult, setShowResult] = useState(false);\r\n  const [purchase, setPurchase] = useState(false);\r\n  const [cardType, setCardType] = useState('');\r\n  const [cardNumber, setCardNumber] = useState('');\r\n  const [cardName, setCardName] = useState('');\r\n  const [cardExp, setCardExp] = useState('');\r\n  const [purchaseResult, setPurchaseResult] = useState('');\r\n\r\n  const [way1Clicked, setWay1Clicked] = useState('');\r\n  const [way2Clicked, setWay2Clicked] = useState('');\r\n\r\n\r\n\r\n  const handleWay1Click = (clickedItem) => {\r\n    console.log(clickedItem)\r\n    setWay1Clicked(clickedItem);\r\n  };\r\n  const handleWay2Click = (clickedItem2) => {\r\n    setWay2Clicked(clickedItem2);\r\n  };\r\n\r\n  const handleTransaction = async(e) =>{\r\n    e.preventDefault();\r\n\r\n    if (way1Clicked == '') {\r\n      setPurchaseResult(\"Please Enter all Flight Information\");\r\n      return\r\n    }\r\n\r\n    if(tripType == \"Round-Trip\" && way2Clicked == ''){\r\n      setPurchaseResult(\"Please Enter all Flight Information\");\r\n      return\r\n    }\r\n\r\n    // flightNum = data['flightNum']\r\n    // airline = data['airline']\r\n    // departure = data['departure']\r\n    \r\n    const result = await fetch('/increaseTicketPrice',{\r\n      method: 'POST',\r\n      headers:{\r\n          'Content-Type' : 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        'flightNum' : way1Clicked['Flight_Number'],\r\n        'airline' : way1Clicked ['Airline_Name'],\r\n        'departure' : DateConverter(way1Clicked['Departure_Date_Time'])\r\n      })\r\n    \r\n    });\r\n    if (result.status === 400){\r\n      setPurchaseResult(\"ERROR IN TRANSACTION\");\r\n    }\r\n    else{\r\n      const priceIncrease = await result.json();\r\n      console.log(priceIncrease);\r\n      if (priceIncrease['Increase']){\r\n        const newFlight = new Map(way1Clicked);\r\n        newFlight.set('Base_Price', way1Clicked['Base_Price']*1.25);\r\n        setWay1Clicked(newFlight);\r\n      }\r\n\r\n      if (tripType === \"Round-Trip\"){\r\n            const Way2Result = await fetch('/increaseTicketPrice',{\r\n              method: 'POST',\r\n              headers:{\r\n                  'Content-Type' : 'application/json'\r\n              },\r\n              body: JSON.stringify({\r\n                'flightNum' : way2Clicked['Flight_Number'],\r\n                'airline' : way2Clicked ['Airline_Name'],\r\n                'departure' : DateConverter(way2Clicked['Departure_Date_Time'])\r\n              })\r\n            \r\n            });\r\n            if (Way2Result.status=== 400){\r\n              setPurchaseResult(\"ERROR IN TRANSACTION\");\r\n            }\r\n            else{\r\n              const priceIncrease = await Way2Result.json();\r\n              if (priceIncrease['Increase']){\r\n                const newFlight = new Map(way2Clicked);\r\n                newFlight.set('Base_Price', way2Clicked['Base_Price']*1.25);\r\n                setWay2Clicked(newFlight);\r\n              }\r\n            }\r\n\r\n      }\r\n    }\r\n    // email = session[0]\r\n    // flightNum = data['flightNum']\r\n    // departure = data['departure']\r\n    // price = data['price']\r\n    // cardType = data['cardType']\r\n    // cardNumber = data['cardNumber']\r\n    // cardName = data['cardName']\r\n    // cardExp = data['cardExp']\r\n    try{\r\n      console.log(\"CARDEXP\", cardExp);\r\n      const response = await fetch('/buyTicket', {\r\n          method: 'POST',\r\n          headers:{\r\n              'Content-Type' : 'application/json'\r\n          },\r\n          body: JSON.stringify({ //TICKET ID WILL BE RNG (CHECK), EMAIL ADDRESS FROM SESSION\r\n              'cardType': cardType,\r\n              'cardNumber': cardNumber,\r\n              'cardName': cardName,\r\n              'cardExp': cardExp,\r\n              'flightNum' : way1Clicked['Flight_Number'],\r\n              'departure' : DateConverter(way1Clicked[\"Departure_Date_Time\"]),\r\n              'price': way1Clicked[\"Base_Price\"] //ADJUST PRICE\r\n          })\r\n        });\r\n        \r\n        if (response.status === 200){\r\n          setPurchaseResult(\"Ticket Bought Successfully\");\r\n          const response = await fetch('/updateCookies', {\r\n            method: 'POST',\r\n            headers:{\r\n                'Content-Type' : 'application/json'\r\n            },\r\n            body: JSON.stringify({ //TICKET ID WILL BE RNG (CHECK), EMAIL ADDRESS FROM SESSION\r\n                \r\n            })\r\n          });\r\n\r\n        }\r\n        else {// (response.status === 400)\r\n          setPurchaseResult(\"Error in Transaction\");\r\n        }\r\n\r\n        if(way2Clicked){\r\n            try{\r\n              const response = await fetch('/buyTicket', {\r\n                method: 'POST',\r\n                headers:{\r\n                    'Content-Type' : 'application/json'\r\n                },\r\n                body: JSON.stringify({ //TICKET ID WILL BE RNG (CHECK), EMAIL ADDRESS FROM SESSION\r\n                    'cardType': cardType,\r\n                    'cardNumber': cardNumber,\r\n                    'cardName': cardName,\r\n                    'cardExp': cardExp,\r\n                    'flightNum' : way2Clicked['Flight_Number'],\r\n                    'departure' : DateConverter(way2Clicked[\"Departure_Date_Time\"]),\r\n                    'price': way2Clicked[\"Base_Price\"] //ADJUST PRICE\r\n                })\r\n              });\r\n              \r\n              if (response.status === 200){\r\n                setPurchaseResult(\"Ticket Bought Successfully\");\r\n              }\r\n              else {// (response.status === 400)\r\n                setPurchaseResult(\"Error in Transaction\");\r\n              }\r\n            }\r\n              catch (error){\r\n                console.log(\"ERROR\", error)\r\n              }\r\n\r\n          }\r\n    \r\n        }\r\n        catch (error){\r\n          console.log(\"ERROR\", error)\r\n        }\r\n      }\r\n\r\n\r\n  const allowPurchase = () => {\r\n    setPurchase(true);\r\n  }\r\n  const handleSubmit = async(e) => {\r\n    console.log(\"POOOOOP: \");\r\n    console.log(isloggedin);\r\n    e.preventDefault();\r\n\r\n    \r\n  try{\r\n    const response = await fetch('/FlightSearch', {\r\n        method: 'POST',\r\n        headers:{\r\n            'Content-Type' : 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            'DepartAirport': departAirport,\r\n            'ArriveAirport': arriveAirport,\r\n            'DepartDate': departDate,\r\n            'ReturnDate': returnDate,\r\n            'TripType' : tripType\r\n\r\n        })\r\n      });\r\n      const responseData = await response.json();\r\n      console.log(responseData);\r\n      console.log(responseData['Flights']);\r\n\r\n      if (response.status === 200){\r\n        setResult(\"\");\r\n        setWay1Flights(responseData[\"Way1\"]); \r\n        setWay2Flights(responseData[\"Way2\"]);\r\n        setShowResult(true);\r\n      }\r\n      else {// (response.status === 400)\r\n        setResult(\"No Flights Found\");\r\n        setWay1Flights(null);\r\n        setWay2Flights(null);\r\n      }\r\n    }\r\n    catch (error){\r\n      console.log(\"ERROR\", error)\r\n    }\r\n\r\n      \r\n  };\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await fetch('/getAirports');\r\n      const data = await response.json();\r\n      setAllAirports(data['Airports']);\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    const intervalId = setInterval(() => {\r\n      fetchData();\r\n    }, 99000);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, []); \r\n\r\n\r\n  return (\r\n    <div className='SearchBox'>\r\n    <form onSubmit={handleSubmit} >\r\n\r\n\r\n    <div className='inputBox'>\r\n        <label>Select a Departure Airport or Departure City</label>\r\n        <select value={departAirport} onChange={(e) => setDepartAirport(e.target.value)}>\r\n        <option value=\"\"> Select an option</option>\r\n            {allAirports.map(item => (\r\n        <option key={item.Airport_Name || item.City} value={item.Airport_Name || item.City}>\r\n            {item.Airport_Name || item.City}\r\n        </option>\r\n      ))}\r\n      </select>\r\n    </div>\r\n\r\n    <div className='inputBox'>\r\n        <label>Select an Arrival Depature Airport or Arrival City</label>\r\n        <select value={arriveAirport} onChange={(e) => setArriveAirport(e.target.value)}>\r\n          <option value=\"\">Select an option</option>\r\n            {allAirports.map(item => (\r\n          <option key={item.Airport_Name || item.City} value={item.Airport_Name || item.City}>\r\n            {item.Airport_Name || item.City}\r\n          </option>\r\n          ))}\r\n        </select>\r\n    </div>\r\n      \r\n      <div className='inputBox'>\r\n        <label >One-Way or Round Trip?</label>\r\n        <select onChange={(e) => setTripType(e.target.value)} required>\r\n          <option value=\"\">Select...</option>\r\n          <option value=\"One-Way\">One-Way</option>\r\n          <option value=\"Round-Trip\">Round-Trip</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div>\r\n      <label htmlFor=\"dateInput\">Departure Date :</label>\r\n      <input\r\n        className='inputBox'\r\n        type=\"date\"\r\n        id=\"departDate\"\r\n        value={departDate}\r\n        onChange={(e) => setDepartDate(e.target.value)}\r\n        pattern=\"\\d{4}-\\d{2}-\\d{2}\"\r\n        required\r\n      />\r\n        </div>\r\n\r\n        \r\n\r\n    {tripType === \"Round-Trip\" && (\r\n        <div>\r\n      <label htmlFor=\"dateInput\">Return Date :</label>\r\n      <input\r\n        className='inputBox'\r\n        type=\"date\"\r\n        id=\"returnDate\"\r\n        value={returnDate}\r\n        onChange={(e) => setReturnDate(e.target.value)}\r\n        pattern=\"\\d{4}-\\d{2}-\\d{2}\"\r\n        required/>\r\n        </div>\r\n    )}\r\n        \r\n\r\n\r\n      <button type=\"submit\">Search Flight</button>\r\n\r\n\r\n    </form>\r\n    <p>{result}</p>\r\n    {showResult && (\r\n    <div>\r\n  \r\n      <p>{result}</p>\r\n      <h2>Departure</h2>\r\n\r\n      {way1Flights && (\r\n          <ul>\r\n            {way1Flights.map((item, index) => (\r\n              <li key={index} onClick={() => handleWay1Click(item)} style={{\r\n                cursor: 'pointer',\r\n                color: way1Clicked === item ? 'red' : 'black',\r\n              }}>\r\n                {Object.entries(item).map(([key, value]) => (\r\n                  <div key={key} >\r\n                    <strong>{key}:</strong> {value}<br /> \r\n                  </div>\r\n                  \r\n                ))}\r\n              </li>\r\n          ))}\r\n          </ul>\r\n      )}\r\n    \r\n\r\n    <div>\r\n      <h2>Return</h2>\r\n\r\n      {way2Flights && (\r\n          <ul>\r\n            {way2Flights.map((item, index) => (\r\n             <li key={index} onClick={() => handleWay2Click(item)} style={{\r\n              cursor: 'pointer',\r\n              color: way2Clicked === item ? 'red' : 'black',\r\n            }}>\r\n                {Object.entries(item).map(([key, value]) => (\r\n                  <div key={key}>\r\n                    <strong>{key}:</strong> {value}<br />\r\n                  </div>\r\n                ))}\r\n              </li>\r\n          ))}\r\n          </ul>\r\n      )}\r\n    </div>\r\n    \r\n\r\n    {isloggedin&& (\r\n    <div>\r\n        <button onClick={allowPurchase}> Purchase A Flight </button>\r\n    </div> \r\n    )}\r\n\r\n    {!isloggedin && (\r\n    <div>\r\n     <Link to =\"/Login\">\r\n        <button > Log in or Register to Purchase a Flight </button>\r\n       </Link>\r\n     </div> \r\n    )}\r\n    \r\n\r\n\r\n    {purchase && (\r\n      <div>\r\n\r\n        <form onSubmit={handleTransaction} >\r\n\r\n        <TextInputBox setState={setCardType} label= {\"Card Type\"}/>\r\n        <TextInputBox setState={setCardNumber} label= {\"Card Number\"}/>\r\n        <TextInputBox setState={setCardName} label= {\"Card Holder Name\"}/>\r\n        <DateInputBox setState={setCardExp} label= {\"Card Expiration\"}/>\r\n\r\n        <button type=\"submit\">Buy</button>\r\n\r\n        </form>\r\n\r\n\r\n      </div>\r\n    )}\r\n\r\n\r\n      <p>{purchaseResult}</p>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    </div>\r\n    )}\r\n\r\n  \r\n    </div> \r\n  );\r\n  \r\n \r\n};\r\n\r\nFlightSearch.propTypes = {\r\n  isloggedin: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default FlightSearch;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}